"PlotTools/interface/KinematicFunctions.h"
"PandaTree/Objects/interface/Event.h"

! Default type
{/F}

! Define the arguments of reset
{reset(panda::Event& event)}

run_num/I = event.runNumber
lumi_num/I = event.lumiNumber
event_num/l = event.eventNumber

npv/I = event.npv
npv_true/I = event.npvTrue

mc_weight = event.weight

met = event.pfMet.pt
metphi = event.pfMet.phi
calomet = event.caloMet.pt
calometphi = event.caloMet.phi
trkmet = event.trkMet.pt
trkmetphi = event.trkMet.phi

met_trigger/O = false
met_filter/O = event.metFilters.pass()

! Default default value is inside {}
! Count some objects
{/I}
{0}
n_loosetau
n_loosepho
n_looselep
n_mediumlep
n_tightlep

n_alljet
n_jet
n_hardjet

{/F}
{-5}
! Save two leptons of each kind
muon,ele -->
1,2 --> lep(panda::Lepton& lep, unsigned char flag)

/O = false -> true
1l_2m_3t/b = 0 -> flag
pt -> lep.pt()
eta -> lep.eta()
phi -> lep.phi()

<--

! Input jets are used to set the following variables
csv_jet,cmva_jet -->
1,2 --> bjet(panda::Jet& jet, float maxpt)

maxtrk -> maxpt
csv -> jet.csv
cmva -> jet.cmva
deepcsvb -> jet.deepCSVb
deepcmvab -> jet.deepCMVAb

--> bvert(panda::SecondaryVertex& vert)

vtx_pt -> vert.pt()
vtx_m -> vert.m()
vtx_3Dval -> vert.vtx3DVal
vtx_3Derr -> vert.vtx3DeVal
vtx_ntrk/I -> vert.ntrk

! Set the defaults for training stuff to 0
{0}
--> bleps(panda::Jet& jet, int nlep, panda::PFCand& lep)

nlep/I -> nlep
leadlep_pt -> lep.pt()
leadlep_ptrel -> lep.p4().Perp(jet.p4().Vect())
leadlep_dr -> deltaR(lep.eta(), lep.phi(), jet.eta(), jet.phi())

{-5}
+jet1,jet2,jet3 --> jet(panda::Jet& jet)

! "Member"/type = default -> Function

/O = false -> true
pt -> jet.pt()
eta -> jet.eta()
phi -> jet.phi()
m -> jet.m()

emfrac -> jet.cef + jet.nef
chf -> jet.chf
nhf -> jet.nhf

--> genjet(panda::GenJet& gen)

gen/O = false -> true
gen_pt -> gen.pt()
gen_eta -> gen.eta()
gen_phi -> gen.phi()
gen_m -> gen.m()

{/I}
{0}

gen_pdgid -> gen.pdgid
gen_parton_flav -> gen.partonFlavor
gen_num_b -> gen.numB

<--

{/F}
{-5}

! Hbb set by sums of jets as 4-vectors
"TLorentzVector.h"
csv_hbb,cmva_hbb --> hbb(TLorentzVector& vec)

/O = false -> true
pt -> vec.Pt()
eta -> vec.Eta()
phi -> vec.Phi()
m -> vec.M()

<--

genboson,gen_t,gen_tbar --> gen(panda::GenParticle& gen)

/O = false -> true
pt -> gen.pt()
eta -> gen.eta()
phi -> gen.phi()
m -> gen.m()

pdgid/I = 0 -> gen.pdgid

<--

! Some calculated things

recoil
recoilphi

dphi_met_trkmet

dphi_uh_csv
dphi_uh_cmva
min_dphi_metj_soft = 4
min_dphi_metj_hard = 4
